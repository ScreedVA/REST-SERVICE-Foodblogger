{% extends "base.html" %} {% block content %}
<div class="row">
  <div class="col-md-6 mx-auto d-flex d-column mb-4 justify-content-between">
    <div>
      <h1>
        Welcome
        <a class="remove-decor"
          href="{{url_for('select_user_profile_view', user_id=user.id, from_view='user_gallery')}}"><span>{{ user.name
            }}</span></a>
      </h1>
    </div>
    {% if profile_image %}
    <div>
      <a href="{{url_for('select_user_profile_view', user_id=user.id, from_view='user_gallery')}}" class="remove-decor">
        <img src="data: {{profile_image.mimetype}};base64,{{profile_image.img|b64encode}}"
          alt="{{ user.name}}'s Profile picture" class="small-round-img">
      </a>
    </div>
    {% endif %}
  </div>
  <br />
  <div class="row">
    <div class="col-md-6 mx-auto">
      <div class="d-flex">
        <a href="{{ url_for('new_post', user_id=user.id)}}" class="btn btn-primary me-2">Make Post</a>
        <a href="{{ url_for('edit_user', user_id=user.id)}}" class="btn btn-primary me-2">Edit {{user.name}}</a>
        <a href="{{ url_for('delete_user', user_id=user.id)}}" class="btn btn-danger">Delete {{user.name}}</a>
      </div>
      <br />
      <hr />
    </div>
  </div>
</div>
{% if not posts: %}
<div class="row vh-100 justify-content-center text-center align-items-center">
  <div class="col-auto">
    <h3>You have No Posts ðŸ¥º</h3>
  </div>
</div>
{% endif %}
<br />
<br />
{% for post in posts: %}
<!-- RENDER POST BLOCK INSTANCE WITH IMAGE -->

{% if post.image %}
<div class="row">
  <div class="col-md-6 mx-auto">
    <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative"
      style="height: 200px">
      <div class="col-3 position-relative">
        <img
          src="data: {{image_class.query.filter(image_class.post_id == post.id).first().mimetype}};base64,{{image_class.query.filter(image_class.post_id == post.id).first().img|b64encode}}"
          alt="{{image_class.query.filter(image_class.post_id == post.id).first().name}}"
          class="position-absolute top-0 start-0 w-100 h-100" style="object-fit: cover" />
      </div>
      <div class="col p-9 flex-column bg-light shadow-lg">
        <strong class="d-inline-block mb-2 text-success-emphasis" style="direction: ltr; text-align: left">{{
          post.category }}</strong>
        <a href="{{ url_for('select_post_view', post_id=post.id, from_view='user_gallery')}}"
          style="text-decoration: none; color: inherit">
          <h3 class="mb-0" style="direction: ltr; text-align: left">
            {{ post.title }}
          </h3>
        </a>
        <div class="mb-1 text-body-secondary" style="direction: ltr; text-align: left">
          {{ post.date_created }}
        </div>
        <p class="mb-auto" style="direction: ltr; text-align: left">
          {{ limit_postlength(post.body)}}
        </p>
      </div>
    </div>
  </div>
</div>
<!-- RENDER POST BLOCK INSTANCE WITHOUT IMAGE -->
{% else: %}
<div class="row">
  <div class="col-md-6 mx-auto">
    <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
      <div class="col p-4 flex-column bg-light shadow-lg">
        <strong class="d-inline-block mb-2 text-success-emphasis" style="direction: ltr; text-align: left">{{
          post.category }}</strong>
        <a href="{{ url_for('select_post_view', post_id=post.id, from_view='user_gallery')}}"
          style="text-decoration: none; color: inherit">
          <h3 class="mb-0" style="direction: ltr; text-align: left">
            {{ post.title }}
          </h3>
        </a>
        <div class="mb-1 text-body-secondary" style="direction: ltr; text-align: left">
          {{ post.date_created }}
        </div>
        <p class="mb-auto" style="direction: ltr; text-align: left">
          {{ limit_postlength(post.body)}}
        </p>
      </div>
    </div>
  </div>
</div>
{% endif %} {% endfor %} {% endblock %}